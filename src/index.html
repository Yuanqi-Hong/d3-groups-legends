<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <style>
      svg { 
        display: block;
        margin: 0 auto;
      }

      h1 { margin-bottom: 2rem; }

      body {
        padding-top: 2rem;
        padding-bottom: 2rem;
      }

      h3 { 
        margin-top: 3rem; 
        margin-bottom: 1rem;
      }

      .container {
        max-width: 46rem;
      }

      img.block {
        display: block;
        border: solid #333 1p;
        margin: 0 auto;
      }

      .axis line, .axis path {
        stroke-width: 0.5;
        stroke: #999;
      }

      #chart-1 svg {
        background: #f6f6f6;
      }

      .g-highlight {
        stroke: red;
        stroke-width: 1;
        fill: none;
        stroke-dasharray: 2 5;
        stroke-linecap: round;
      }

      .selected .g-highlight {
        stroke: green;
      }

      .width-line {
        stroke-width: 0.5;
        stroke-dasharray: 2 5;
        stroke-linecap: round;
      }
      text {
        font-size: 12px;
      }

      .width-line-hidden .width-line,
      .width-line-hidden .width-text {
        visibility: hidden;
      }

      .circle-coords-hidden .circle-coords {
        visibility: hidden;
      }

      .g-highlight-hidden .g-highlight,
      .g-highlight-hidden .g-coords {
        visibility: hidden;
      }

      pre.code {
        background: #333;
        color: white;
        padding: 5px;
        font-size: 16px;
      }
      pre em {
        color: yellow;
        font-style: normal;
      }
      .demo {
        border: solid black 1px;
        margin-bottom: 1rem;
      }
    </style>
  </head>
</head>
<body>
<div class="container">
  <div class="row">
    <div class="col-12">
      <h1>Group tags, template literals, small multiples-ish</h1>

      <p>You'll need to run <code>npm start</code> or <code>npm run start</code> to start up Parcel. Be sure you've run <code>npm install</code> to install all of the appropriate packages.</p>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col-12">
      <h3>Storytime: <code>&lt;g&gt;</code> tags</h3>
      <p><a href="https://www.dashingd3js.com/svg-group-element-and-d3js">This piece on Dashing D3</a> does a great job explaining group elements, but I'm just going to give you one of the very basic ideas in like six seconds.</p>
      <p>Let's say I have a few circles, nothing crazy.</p>

      <pre class="code">&lt;svg width='200' height='100'&gt;
  &lt;circle cy='25' cx='25' r='20' fill='pink'&gt;&lt;/circle&gt;
  &lt;circle cy='25' cx='75' r='20' fill='pink'&gt;&lt;/circle&gt;
  &lt;circle cy='25' cx='125' r='20' fill='lightblue'&gt;&lt;/circle&gt;
  &lt;circle cy='25' cx='175' r='20' fill='lightblue'&gt;&lt;/circle&gt;
&lt;/svg&gt;</pre>

      <svg class='demo' width='200' height='100'>
        <circle cy='25' cx='25' r='20' fill='pink'></circle>
        <circle cy='25' cx='75' r='20' fill='pink'></circle>
        <circle cy='25' cx='125' r='20' fill='lightblue'></circle>
        <circle cy='25' cx='175' r='20' fill='lightblue'></circle>
      </svg>

      <p>If I wanted to move the pink ones down a bit, I could go ahead and change their <code>cy</code> values.</p>
      <pre class="code">&lt;svg width='200' height='100'&gt;
  &lt;circle <em>cy='75'</em> cx='25' r='20' fill='pink'&gt;&lt;/circle&gt;
  &lt;circle <em>cy='75'</em> cx='75' r='20' fill='pink'&gt;&lt;/circle&gt;
  &lt;circle cy='25' cx='125' r='20' fill='lightblue'&gt;&lt;/circle&gt;
  &lt;circle cy='25' cx='175' r='20' fill='lightblue'&gt;&lt;/circle&gt;
&lt;/svg&gt;</pre>
      <svg class='demo' width='200' height='100'>
        <circle cy='75' cx='25' r='20' fill='pink'></circle>
        <circle cy='75' cx='75' r='20' fill='pink'></circle>
        <circle cy='25' cx='125' r='20' fill='lightblue'></circle>
        <circle cy='25' cx='175' r='20' fill='lightblue'></circle>
      </svg>

      <p>But since this is a demonstration of the <code>&lt;g&gt;</code> group element, it isn't going to be that easy! Maybe you have TEN THOUSAND of those little pink circles you gotta move, and it's going to be a pain to do each of them individually.</p>

      <p>So hey, if they're both pink, they're both moving together, they're kind of doing the same thing, it would make sense to put them in a group, yeah? That's the <code>g</code> element.</p>

      <pre class="code">&lt;svg width='200' height='100'&gt;
  <em>&lt;g&gt;</em>
    &lt;circle cy='25' cx='25' r='20' fill='pink'&gt;&lt;/circle&gt;
    &lt;circle cy='25' cx='75' r='20' fill='pink'&gt;&lt;/circle&gt;
  <em>&lt;/g&gt;</em>
  &lt;circle cy='25' cx='125' r='20' fill='lightblue'&gt;&lt;/circle&gt;
  &lt;circle cy='25' cx='175' r='20' fill='lightblue'&gt;&lt;/circle&gt;
&lt;/svg&gt;</pre>

      <svg class='demo' width='200' height='100'>
        <g>
          <circle cy='25' cx='25' r='20' fill='pink'></circle>
          <circle cy='25' cx='75' r='20' fill='pink'></circle>
        </g>
        <circle cy='25' cx='125' r='20' fill='lightblue'></circle>
        <circle cy='25' cx='175' r='20' fill='lightblue'></circle>
      </svg>

      <p>Nothing changed, obviously, but let's say I wanted to move them down again. Instead of changing each of the circles' <code>cy</code> values, I can just <code>transform</code> the <code>g</code>.</p>
      <pre class="code">&lt;svg width='200' height='100'&gt;
  <em>&lt;g transform="translate(0,50)"&gt;</em>
    &lt;circle cy='25' cx='25' r='20' fill='pink'&gt;&lt;/circle&gt;
    &lt;circle cy='25' cx='75' r='20' fill='pink'&gt;&lt;/circle&gt;
  <em>&lt;/g&gt;</em>
  &lt;circle cy='25' cx='125' r='20' fill='lightblue'&gt;&lt;/circle&gt;
  &lt;circle cy='25' cx='175' r='20' fill='lightblue'&gt;&lt;/circle&gt;
&lt;/svg&gt;</pre>
      <svg class='demo' width='200' height='100'>
        <g transform="translate(0,50)">
          <circle cy='25' cx='25' r='20' fill='pink'></circle>
          <circle cy='25' cx='75' r='20' fill='pink'></circle>
        </g>
        <circle cy='25' cx='125' r='20' fill='lightblue'></circle>
        <circle cy='25' cx='175' r='20' fill='lightblue'></circle>
      </svg>

      <p>Tada! Everything inside of that group was moved <code>0</code> pixels on the x axis and <code>20</code> pixels on the y axis. Great, cool, perfect. That's a <code>g</code>, that's <code>transform</code>, congratulations.</p>
      <p>Now when you have like 10 minutes just go <a href="https://www.dashingd3js.com/svg-group-element-and-d3js">read that page</a> and learn it a lot more in-depth.</p>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col-12">
      <h3>Storytime: Template Literals</h3>
      <p>If you look at my code this time around, you're going to see a lot of stuff with weird backticks &mdash; that's the <code>`</code> characters &mdash; such as <code>`translate('${margin.left},${margin.top}')`</code>. We used them for a hot second last class, but I thought we should take a moment to really look at them.</p>

      <p>The backticks (<code>`</code>) and the <code>${}</code> stuff is new for JavaScript. They're technically called <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">template literals</a>. They let you do fill-in-the-blanks with strings instead of having to add strings and numbers and stuff together.</p>

      <p>To do fill-in-the-blanks, you'll do <code>`My name is ${name}`</code> instead of <code>"My name is" + name</code>. For example, let's look at how we set margins on our SVG.</p>

      <p><strong>Old version:</strong></p>
      <pre class='code'>.attr('transform', 'translate("' + margin.left + ',' + margin.right + '"')</pre>

      <p><strong>New version:</strong></p>
      <pre class='code'>.attr('transform', `translate('${margin.left},${margin.right}')`)</pre>

      <p>It's a little more complicated since you're using weird characters and <code>${}</code> is very very wiggly, but we'll (probably) survive.</p>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col-12">
      <h3>Chart 1: What's a <code>&lt;g&gt;</code>? + margin convention</h3>
      <p>
        <a class="btn btn-sm btn-warning mr-3" id="toggle-coords-1">Toggle circle coordinates</a>
      </p>
      <div id="chart-1">
      </div>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col-12">
      <h3>Chart 2: Using <code>&lt;g&gt;</code> tags instad of x and y</h3>
      <p>Typically we position something with <code>x</code> and <code>y</code> (or <code>cx</code> and <code>cy</code>). We can also use a <code>g</code> tag + <code>transform</code>/<code>translate</code> to push things around instead.</p>
      <p></p>
      <div id="chart-2">
      </div>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col-12">
      <h3>Chart 3: Using <code>&lt;g&gt;</code> tags to space out complex graphics or small multiples</h3>
      <p>We did this one at the end of last class! We need to fix up the axis lines, though.</p>
      <p></p>
      <div id="chart-3">
      </div>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col-12">
      <h3>Chart 4: <code>g</code> elements for fun and profit</h3>
      <p>We're going to recreate <a href="https://archive.nytimes.com/screenshots/www.nytimes.com/interactive/2009/03/01/business/20090301_WageGap.jpg">this NYT piece</a> because it's <a href="https://archive.nytimes.com/www.nytimes.com/interactive/2009/03/01/business/20090301_WageGap.html">BROKEN!</a> It's from 2009 but hey, there's new data, right?</p>
      <p>We'll also learn how legends work.</p>
      <p>Data is in <code>weekly_earnings.csv</code></p>
      <p></p>
      <div id="chart-4">
      </div>
    </div>
  </div>


  <div class="row mt-3">
    <div class="col-12">
      <h3>Chart 5: Small multiples, but... different</h3>
      <p>You don't need every single graphic to be exactly the same when you're doing small multiples. Let's reproduce <a href="https://www.nytimes.com/interactive/projects/cp/summer-of-science-2015/latest/how-often-is-bmi-misleading">this piece from the NYT</a> about BMI differences between men and women.</p>
      <p>Also, we're drawing two separate <code>svg</code> elements instead of using <code>g</code> tags this time!</p>
      <p>Data is in <code>bmi-fat.csv</code></p>
      <p></p>
      <div id="chart-5">
      </div>
    </div>
  </div>

  <!-- Now we include our actual visualization -->
  <script src="chart-1.js"></script>
  <script src="chart-2.js"></script>
  <script src="chart-3.js"></script>
  <script src="chart-4.js"></script>
  <script src="chart-5.js"></script>
</div>
</body>
</html>